
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Aarov's 60-Flag Game - Complete Edition</title>
  <style>
    body { font-family: Arial, sans-serif; background: #e0f7fa; text-align: center; padding: 20px; position: relative; }
    .aarov-avatar { position: absolute; top: 20px; right: 20px; text-align: center; }
    .aarov-avatar img { width: 100px; height: 100px; border-radius: 50%; border: 4px solid #fff; box-shadow: 0 0 15px rgba(0, 0, 0, 0.2); }
    .aarov-avatar p { font-size: 0.9rem; color: #00796b; font-weight: bold; }
    h1 { color: #00796b; }
    .flags { display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin-top: 20px; }
    .flag { border: 4px solid #ccc; border-radius: 10px; overflow: hidden; transition: 0.3s; cursor: pointer; }
    .flag:hover { transform: scale(1.05); border-color: #007BFF; }
    .flag img { width: 150px; height: 100px; }
    #controls button { margin: 5px; padding: 10px 15px; font-size: 1rem; cursor: pointer; border-radius: 6px; border: none; background: #007BFF; color: white; }
    #timer, #score, #question-count, #result { font-size: 1.2rem; margin-top: 10px; }
    #report, #final-report { display: none; margin-top: 30px; }
    table { margin: auto; border-collapse: collapse; width: 90%; }
    th, td { padding: 10px; border: 1px solid #ccc; }
    th { background-color: #00796b; color: white; }
  </style>
</head>
<body>

<div class="aarov-avatar">
  <img src="https://i.imgur.com/wwQASxI.jpeg" alt="Aarov">
  <p>Aarov is playing! üåü</p>
</div>

<h1>üåç Aarov's 60-Flag Challenge üéå</h1>
<div id="controls">
  <button onclick="startGame()">‚ñ∂Ô∏è Start</button>
  <button onclick="pauseGame()">‚è∏Ô∏è Pause</button>
  <button onclick="stopGame()">‚èπÔ∏è Stop</button>
  <button onclick="repeatVoice()">üîÅ Repeat</button>
</div>

<div id="question-count">Question: 0 / 60</div>
<div id="timer">‚è±Ô∏è Time: 0.00s</div>
<div id="score">‚úÖ Score: 0</div>
<div class="flags" id="flags-container"></div>
<div id="result"></div>

<div id="report">
  <h2>‚è∏Ô∏è Paused - Progress</h2>
  <table><thead><tr><th>Q#</th><th>Answer</th><th>Result</th><th>Time (s)</th></tr></thead><tbody id="report-body"></tbody></table>
</div>

<div id="final-report">
  <h2>‚úÖ Game Complete - Final Report</h2>
  <table><thead><tr><th>Q#</th><th>Answer</th><th>Result</th><th>Time (s)</th></tr></thead><tbody id="final-body"></tbody></table>
</div>

<script>
  const countries = [
    { name: "Sri Lanka", code: "lk" }, { name: "China", code: "cn" }, { name: "Singapore", code: "sg" }, { name: "Australia", code: "au" },
    { name: "New Zealand", code: "nz" }, { name: "Canada", code: "ca" }, { name: "Bangladesh", code: "bd" }, { name: "South Korea", code: "kr" },
    { name: "USA", code: "us" }, { name: "Japan", code: "jp" }, { name: "Iran", code: "ir" }, { name: "Iraq", code: "iq" }, { name: "Russia", code: "ru" },
    { name: "Taiwan", code: "tw" }, { name: "Zimbabwe", code: "zw" }, { name: "Italy", code: "it" }, { name: "Libya", code: "ly" }, { name: "Serbia", code: "rs" },
    { name: "Sudan", code: "sd" }, { name: "Bahrain", code: "bh" }, { name: "Ireland", code: "ie" }, { name: "Netherlands", code: "nl" }, { name: "Scotland", code: "gb" },
    { name: "Belgium", code: "be" }, { name: "Bhutan", code: "bt" }, { name: "Czech Republic", code: "cz" }, { name: "Denmark", code: "dk" },
    { name: "Germany", code: "de" }, { name: "Indonesia", code: "id" }, { name: "Thailand", code: "th" }, { name: "Argentina", code: "ar" },
    { name: "Cuba", code: "cu" }, { name: "Congo", code: "cg" }, { name: "Austria", code: "at" }, { name: "India", code: "in" },
    { name: "Pakistan", code: "pk" }, { name: "Spain", code: "es" }, { name: "Romania", code: "ro" }, { name: "Dominican Republic", code: "do" },
    { name: "Tonga", code: "to" }, { name: "Malaysia", code: "my" }, { name: "Cambodia", code: "kh" }, { name: "Morocco", code: "ma" },
    { name: "Lebanon", code: "lb" }, { name: "Nepal", code: "np" }, { name: "Niger", code: "ne" }, { name: "Mauritius", code: "mu" },
    { name: "Peru", code: "pe" }, { name: "Kenya", code: "ke" }, { name: "France", code: "fr" }, { name: "Cameroon", code: "cm" },
    { name: "Maldives", code: "mv" }, { name: "United Arab Emirates", code: "ae" }, { name: "North Korea", code: "kp" }, { name: "Brazil", code: "br" },
    { name: "Costa Rica", code: "cr" }, { name: "Saudi Arabia", code: "sa" }, { name: "Ghana", code: "gh" }, { name: "Finland", code: "fi" }
  ];

  let shuffled = [], index = 0, paused = false;
  let currentAnswer = null, currentName = "", startTime, timerLoop, responses = [];

  function speak(text) {
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = "en-US"; window.speechSynthesis.cancel(); window.speechSynthesis.speak(msg);
  }

  function repeatVoice() {
    if (currentName) speak(currentName);
  }

  function startGame() {
    shuffled = [...countries].sort(() => Math.random() - 0.5);
    index = 0; responses = []; paused = false;
    document.getElementById("final-report").style.display = "none";
    document.getElementById("report").style.display = "none";
    nextQuestion();
  }

  function pauseGame() {
    paused = true;
    clearInterval(timerLoop);
    document.getElementById("report").style.display = "block";
    const body = document.getElementById("report-body");
    body.innerHTML = responses.map((r, i) => `<tr><td>${i+1}</td><td>${r.answer}</td><td>${r.result}</td><td>${r.time}</td></tr>`).join("");
  }

  function stopGame() {
    paused = true;
    clearInterval(timerLoop);
    document.getElementById("flags-container").innerHTML = "";
    document.getElementById("question-count").textContent = "Question: 0 / 60";
    document.getElementById("timer").textContent = "‚è±Ô∏è Time: 0.00s";
    document.getElementById("score").textContent = "‚úÖ Score: 0";
  }

  function nextQuestion() {
    if (paused || index >= shuffled.length) return showFinalReport();
    currentAnswer = shuffled[index];
    currentName = currentAnswer.name;
    document.getElementById("question-count").textContent = `Question: ${index+1} / 60`;
    document.getElementById("result").textContent = "";
    const container = document.getElementById("flags-container");
    container.innerHTML = "";

    const options = [...countries].sort(() => Math.random() - 0.5).slice(0, 3);
    if (!options.includes(currentAnswer)) options[0] = currentAnswer;
    const finalOptions = [...options].sort(() => Math.random() - 0.5);
    finalOptions.forEach(country => {
      const div = document.createElement("div");
      div.className = "flag";
      div.innerHTML = `<img src="https://flagcdn.com/w320/${country.code}.png" alt="${country.name}">`;
      div.onclick = () => handleAnswer(country.name === currentAnswer.name);
      container.appendChild(div);
    });

    speak(currentName);
    startTime = Date.now();
    timerLoop = setInterval(() => {
      const time = ((Date.now() - startTime)/1000).toFixed(2);
      document.getElementById("timer").textContent = `‚è±Ô∏è Time: ${time}s`;
    }, 100);
  }

  function handleAnswer(correct) {
    clearInterval(timerLoop);
    const timeTaken = ((Date.now() - startTime)/1000).toFixed(2);
    responses.push({ answer: currentName, result: correct ? "‚úÖ" : "‚ùå", time: timeTaken });
    if (correct) {
      document.getElementById("result").textContent = `‚úÖ Correct! (${timeTaken}s)`;
      document.getElementById("score").textContent = `‚úÖ Score: ${responses.filter(r => r.result === "‚úÖ").length}`;
    } else {
      document.getElementById("result").textContent = `‚ùå Wrong! Answer: ${currentName}`;
    }
    index++;
    setTimeout(nextQuestion, 1000);
  }

  function showFinalReport() {
    document.getElementById("final-report").style.display = "block";
    const body = document.getElementById("final-body");
    body.innerHTML = responses.map((r, i) => `<tr><td>${i+1}</td><td>${r.answer}</td><td>${r.result}</td><td>${r.time}</td></tr>`).join("");
  }
</script>

</body>
</html>
